(window.__se_editor_jsonp=window.__se_editor_jsonp||[]).push([[2],{1164:function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n,o,a,i,s,p,c,d,u=r(18),l=r.n(u),g=r(21),h=r.n(g),y=r(7),_=r.n(y),f=(r(19),r(6)),v=r(8),b={INSIDE:["text","object","complex","iframe","image"],OUTSIDE:["template","groupLayer","aside","library"],EXTERNAL:["external-file","external-text","external-complex"]},m=(n=f.g.ref,o=function(){function e(e){void 0===e&&(e={disable:!1}),l()(this,"progress",a,this),l()(this,"type",i,this),l()(this,"items",s,this),l()(this,"dropPosition",p,this),l()(this,"disabled",c,this),l()(this,"updateReadySelection",d,this),this.disabled=e.disable}var t=e.prototype;return t.setItem=function(e,t){this.items.replace([e]),this.type=t},t.setItems=function(e,t){this.items.replace(e),this.type=t},t.reset=function(){this.items=[],this.type=null,this.progress="none",this.dropPosition={direction:"",point:{compId:"",unitId:"",paraId:null,nodeId:null,offset:0}}},t.disable=function(){this.disabled=!0},t.enable=function(){this.disabled=!1},h()(e,[{key:"isInsideType",get:function(){return b.INSIDE.includes(this.type)}},{key:"isOutsideType",get:function(){return b.OUTSIDE.includes(this.type)}},{key:"isDragging",get:function(){return["dragging","undroppable"].includes(this.progress)}},{key:"isExternalType",get:function(){return b.EXTERNAL.includes(this.type)}},{key:"isCanvasBottomActivated",get:function(){return"dragging"===this.progress&&this.dropPosition.direction===v.z.CANVAS_BOTTOM}},{key:"isDisabled",get:function(){return!0===this.disabled}}]),e}(),a=_()(o.prototype,"progress",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),i=_()(o.prototype,"type",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=_()(o.prototype,"items",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=_()(o.prototype,"dropPosition",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{direction:"",point:{compId:"",unitId:"",paraId:null,nodeId:null,offset:0}}}}),c=_()(o.prototype,"disabled",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=_()(o.prototype,"updateReadySelection",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_()(o.prototype,"isInsideType",[f.e],Object.getOwnPropertyDescriptor(o.prototype,"isInsideType"),o.prototype),_()(o.prototype,"isOutsideType",[f.e],Object.getOwnPropertyDescriptor(o.prototype,"isOutsideType"),o.prototype),_()(o.prototype,"isDragging",[f.e],Object.getOwnPropertyDescriptor(o.prototype,"isDragging"),o.prototype),_()(o.prototype,"isExternalType",[f.e],Object.getOwnPropertyDescriptor(o.prototype,"isExternalType"),o.prototype),_()(o.prototype,"isCanvasBottomActivated",[f.e],Object.getOwnPropertyDescriptor(o.prototype,"isCanvasBottomActivated"),o.prototype),_()(o.prototype,"setItem",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"setItem"),o.prototype),_()(o.prototype,"setItems",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"setItems"),o.prototype),_()(o.prototype,"reset",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"reset"),o.prototype),_()(o.prototype,"isDisabled",[f.e],Object.getOwnPropertyDescriptor(o.prototype,"isDisabled"),o.prototype),_()(o.prototype,"disable",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"disable"),o.prototype),_()(o.prototype,"enable",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"enable"),o.prototype),o),D=m;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/stores/drag-and-drop-store.js",localName:t}})}catch(e){}}e(b,"TYPES"),e(m,"DragAndDropStore"),e(D,"default")}()},1166:function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n,o,a,i,s=r(18),p=r.n(s),c=r(21),d=r.n(c),u=r(5),l=r.n(u),g=r(17),h=r.n(g),y=r(7),_=r.n(y),f=(r(19),r(6)),v=r(8),b=(n=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._processingTaskCount=0,t._contentTextLength=null,p()(t,"_readOnly",o,h()(h()(t))),p()(t,"_paused",a,h()(h()(t))),p()(t,"viewMode",i,h()(h()(t))),t}l()(t,e);var r=t.prototype;return r.busy=function(){this._processingTaskCount++},r.idle=function(){this._processingTaskCount--},r.startReadOnly=function(){this._readOnly=!0},r.finishReadOnly=function(){this._readOnly=!1},r.pause=function(){this._paused=!0},r.unpause=function(){this._paused=!1},r.setContentTextLength=function(e){this._contentTextLength=e},r.changeViewMode=function(e){this.viewMode=e},d()(t,[{key:"readOnly",get:function(){return this._readOnly}},{key:"paused",get:function(){return this._paused}},{key:"isProcessing",get:function(){return this._processingTaskCount>0}},{key:"contentTextLength",get:function(){return this._contentTextLength}}]),t}(v.y),o=_()(n.prototype,"_readOnly",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=_()(n.prototype,"_paused",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=_()(n.prototype,"viewMode",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.N.VIEW_MODE_PC}}),_()(n.prototype,"readOnly",[f.e],Object.getOwnPropertyDescriptor(n.prototype,"readOnly"),n.prototype),_()(n.prototype,"paused",[f.e],Object.getOwnPropertyDescriptor(n.prototype,"paused"),n.prototype),n),m=b;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/stores/editor-status-store.js",localName:t}})}catch(e){}}e(b,"EditorStatusStore"),e(m,"default")}()},225:function(e,t,r){"use strict";r.d(t,"a",function(){return D});var n,o,a,i=r(0),s=r.n(i),p=r(2),c=r.n(p),d=r(5),u=r.n(d),l=r(7),g=r.n(l),h=r(39),y=r(69),_=r(12),f=r(8),v=r(6),b=r(51),m=r(9),D=(n=Object(m.history)({sync:!1}),o=Object(m.history)({sync:!1}),a=function(e){function t(){var t;return(t=e.call(this)||this)._imageBehavior=new b.a,t._toastLayerService=f.P.get("toastLayerService"),t._dragAndDropService=f.P.get("dragAndDropService"),t._finderService=f.P.get("finderService"),t._editingService=f.P.get("editingService"),t._canvasScrollingService=f.P.get("canvasScrollingService"),t._alertLayerService=f.P.get("alertLayerService"),t._canvasLayoutService=f.P.get("canvasLayoutService"),t._imageStripComponentService=f.P.get("imageStripComponentService"),t._imageComponentService=f.P.get("imageComponentService"),t._searchPanelLayoutService=f.P.get("searchPanelLayoutService"),t._i18n=f.P.get("i18n"),t}u()(t,e);var r=t.prototype;return r.dragStart=function(e){if(!this._dragAndDropService.isAleadyDragStart()){var t=this._finderService.getDraggableCompStoresWithinSelection();this._dragAndDropService.dragStart({event:e,items:t})}},r.dragEnter=function(e){this._dragAndDropService.dragEnter(e)},r.dragLeave=function(){this._dragAndDropService.dragLeave()},r.dragOver=function(e){this._dragAndDropService.dragOver(e),this._canvasScrollingService.scrollPage(e)},r.drop=function(){var e=c()(s.a.mark(function e(t,r){var n,o,a,i,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._dragAndDropService.filterImageFiles(r),o=this._dragAndDropService.drop(t),a=n&&!1===Object(h.a)(n.nonImageFiles),this._canvasScrollingService.forceStopAutoScroll(),o){e.next=6;break}return e.abrupt("return");case 6:if(a&&this._alertLayerService.open({type:"alert",title:this._i18n("dragAndDropUseCase:file_format_error_title"),description:this._i18n("dragAndDropUseCase:file_format_error")}),i=o.skipDrop,!(p=o.errorMsg)){e.next=11;break}return this._showWarning(p),e.abrupt("return");case 11:if(!i){e.next=13;break}return e.abrupt("return");case 13:e.t0=o.type,e.next="external-file"===e.t0?16:"library"===e.t0?19:"template"===e.t0?21:"aside"===e.t0?23:26;break;case 16:return e.next=18,this._dropExternalFile(o);case 18:return e.abrupt("break",27);case 19:return this._dropLibrary(o),e.abrupt("break",27);case 21:return this._dropTemplate(o),e.abrupt("break",27);case 23:return e.next=25,this._dropAside(o);case 25:return e.abrupt("break",27);case 26:this._move(o);case 27:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),r._move=function(e){var t=this._makeInsertMeta(e);this._dragAndDropService.setUpdateReadySelection(!0),this._editingService.move(t)},r._dropAside=function(){var e=c()(s.a.mark(function e(t){var r,n,o,a,i,p,c,d,u,l,g,h,f,v,b,m,D=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.insertPoint,n=t.items,o=t.targetCtype,a=t.targetCompId,i=this._makeInsertMeta(t),p=n[0],c=p.ctype,d=encodeURIComponent(p.src),"image"!==c){e.next=30;break}if("image"!==o&&"imageStrip"!==o){e.next=18;break}if(u=this._imageComponentService.createShellsFromCompData(n),l=u.imageCompStores,g=u.ids,i.items=l,h=this._editingService.insertByDrop(i),!this._imageStripComponentService.isImageCompIncluded(Object(_.a)(h,"start"),r)){e.next=15;break}return f=this._imageStripComponentService.getShellUnitInfoOfImageStripComp(h),v=f.unitStores,e.abrupt("return",this._imageBehavior.insert({validFiles:[d],invalidFiles:[]},{makeComponent:function(e){return{validImages:e,invalidImages:[],shellImageCompIds:g,shellImageComps:l}}}).then(function(e){e.succeededImages.forEach(function(e){var t=e.response,r=Object(y.a)(v,{id:t.id});D._imageStripComponentService.updateShellImageUnitBy(t,r,h.start.compId)})}));case 15:return e.abrupt("return",this._imageBehavior.insert({validFiles:[d],invalidFiles:[]},{makeComponent:function(e){return{validImages:e,invalidImages:[],shellImageCompIds:g}},onEachUpload:function(e){var t=e.code,r=e.response;"SUCCESS"===t&&D._imageComponentService.updateShellImageCompStore(r.id,r)}}));case 16:e.next=28;break;case 18:if("documentTitle"!==o){e.next=24;break}return e.next=21,this._imageBehavior.insertBackgroundFromUrls(a,[d]);case 21:return e.abrupt("return",e.sent);case 24:return b=this._insertByDrop.bind(this,i),e.next=27,this._imageBehavior.dropImageFromAside(n,b);case 27:return e.abrupt("return",e.sent);case 28:e.next=39;break;case 30:if("material"!==c||"news"!==p.type){e.next=38;break}return e.next=33,this._searchPanelLayoutService.itemDataToStore(p);case 33:m=e.sent,i.items=[m],this._editingService.insertByDrop(i),e.next=39;break;case 38:this._editingService.insertByDrop(i);case 39:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._makeInsertMeta=function(e){return{insertPoint:e.insertPoint,insertCommand:e.insertCommand,items:e.items}},r._dropTemplate=function(e){var t=this._makeInsertMeta(e);t.followCurrentAlign=!1,this._editingService.insertByDrop(t)},r._dropLibrary=function(e){var t=this._makeInsertMeta(e);this._editingService.insertByDrop(t)},r._dropExternalFile=function(){var e=c()(s.a.mark(function e(t){var r,n,o,a,i,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.items,n=t.targetCtype,o=t.targetCompId,a=this._makeInsertMeta(t),"documentTitle"!==n){e.next=9;break}return i=this._insertBackgroundImageByDrop.bind(this,a),e.next=6,this._imageBehavior.insertExternalBackground(o,r,i);case 6:return e.abrupt("return",e.sent);case 9:return p=this._insertByDrop.bind(this,a),e.next=12,this._imageBehavior.insertExternalImage(r,p);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._insertByDrop=function(e,t){e.items=t,this._editingService.insertByDrop(e)},r._insertBackgroundImageByDrop=function(e,t){var r=this._dragAndDropService.getBackgroundImageData(t);e.items=[r],this._editingService.insertByDrop(e)},r.dragEnd=function(){this._dragAndDropService.reset(),this._canvasLayoutService.refreshVirtualEditable(),this._canvasScrollingService.forceStopAutoScroll()},r._showWarning=function(e){e&&this._toastLayerService.warningMessage(e)},r.hideIENativeDragGhost=function(e){this._dragAndDropService.hideIENativeDragGhost(e)},t}(f.n),g()(a.prototype,"dragStart",[m.preventOnComponentProcessing,v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragStart"),a.prototype),g()(a.prototype,"dragEnter",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragEnter"),a.prototype),g()(a.prototype,"dragLeave",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragLeave"),a.prototype),g()(a.prototype,"dragOver",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragOver"),a.prototype),g()(a.prototype,"drop",[m.sentryCatch,v.d],Object.getOwnPropertyDescriptor(a.prototype,"drop"),a.prototype),g()(a.prototype,"_move",[v.d,m.history],Object.getOwnPropertyDescriptor(a.prototype,"_move"),a.prototype),g()(a.prototype,"_dropAside",[v.d,n],Object.getOwnPropertyDescriptor(a.prototype,"_dropAside"),a.prototype),g()(a.prototype,"_dropTemplate",[m.history],Object.getOwnPropertyDescriptor(a.prototype,"_dropTemplate"),a.prototype),g()(a.prototype,"_dropLibrary",[m.history],Object.getOwnPropertyDescriptor(a.prototype,"_dropLibrary"),a.prototype),g()(a.prototype,"_dropExternalFile",[v.d,o],Object.getOwnPropertyDescriptor(a.prototype,"_dropExternalFile"),a.prototype),g()(a.prototype,"dragEnd",[v.d],Object.getOwnPropertyDescriptor(a.prototype,"dragEnd"),a.prototype),a);!function(){!function(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/use-case/drag-and-drop-use-case.js",localName:t}})}catch(e){}}(D,"DragAndDropUseCase")}()},652:function(e,t,r){"use strict";var n,o=r(7),a=r.n(o),i=r(8),s=r(6),p=r(12),c=(n=function(){function e(){this._canvasScrollingService=i.P.get("canvasScrollingService"),this._domAccessor=i.P.get("domAccessor"),this._virtualEditable=i.P.get("virtualEditable"),this._errorResolver=i.P.get("errorResolver"),this._sentryManager=i.P.get("sentryManager"),this._xhrInterceptors=i.P.get("xhrInterceptors"),this._interceptorAjaxError()}var t=e.prototype;return t.recoverError=function(e){if(this._canvasScrollingService.focusToFirstComp(),this._domAccessor.reset(),this._virtualEditable.recover(),!e)return!1;try{this._sentryManager.captureException(e)}catch(e){}},t._interceptorAjaxError=function(){var e=this;this._xhrInterceptors.add({after:function(t){var r=Object(p.a)(t,"response.status");if(!1===[200,400,403].includes(r)){var n=t;n.isSELog=!0,e._sentryManager.captureException(n)}return!0}})},e}(),a()(n.prototype,"recoverError",[s.d],Object.getOwnPropertyDescriptor(n.prototype,"recoverError"),n.prototype),n),d=c;t.a=d,function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/use-case/error-recovery-use-case.js",localName:t}})}catch(e){}}e(c,"ErrorRecoveryUseCase"),e(d,"default")}()},653:function(e,t,r){"use strict";var n,o=r(7),a=r.n(o),i=r(8),s=r(6),p=(n=function(){function e(){this._a11yService=i.P.get("a11yService")}return e.prototype.handleFocus=function(e){var t=e.relatedTarget;t&&t!==document.body&&(this._a11yService.isInsideEditorWrapper(t)||this._a11yService.focusToEditable())},e}(),a()(n.prototype,"handleFocus",[s.d],Object.getOwnPropertyDescriptor(n.prototype,"handleFocus"),n.prototype),n),c=p;t.a=c,function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/use-case/a11y-focus-use-case.js",localName:t}})}catch(e){}}e(p,"A11yFocusUseCase"),e(c,"default")}()},695:function(e,t,r){"use strict";var n,o=r(5),a=r.n(o),i=r(7),s=r.n(i),p=r(9),c=r(1157),d=r(1164),u=r(1166),l=r(225),g=r(652),h=r(653),y=r(6),_=r(302),f=r(11),v=r.n(f),b=r(8),m=(n=function(e){function t(){var t;t=e.call(this)||this;var r=b.P.get("configAgent").get("deviceType");return t._isDesktop=r===b.v.DESKTOP,t}a()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._canvas=b.P.get("domAccessor").getCanvas()},r.render=function(){var e=this.props,t=e.className,r=e.store,n=v()(t,{"se-is-dragging":r.isDragging}),o=this._isDesktop;return y.b.createElement("div",{className:n,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseMove:this._handleMouseMove,onMouseUp:this._handleMouseUp,onDragStart:o?this._handleDragStart:function(){},onDragEnter:o?this._handleDragEnter:function(){},onDragLeave:o?this._handleDragLeave:function(){},onDragOver:o?this._handleDragOver:function(){},onDragEnd:o?this._handleDragEnd:function(){},onDrop:o?this._handleDrop:function(){}},this.props.children)},r._handleClick=function(e){this.props.onEnhancerClick(e)},r._handleMouseDown=function(e){this.props.onEnhancerMouseDown(e)},r._handleMouseMove=function(e){this.props.onEnhancerMouseMove(e)},r._handleMouseUp=function(e){this.props.onEnhancerMouseUp(e)},r._isDroppable=function(e){return!!this._canvas&&this._canvas.contains(e.target)},r._handleDragStart=function(e){this.props.store.isDisabled||(this.props.useCase.dragStart(e.nativeEvent),this.props.onEnhancerDragStart(e))},r._handleDragEnter=function(e){this.props.store.isDisabled||this.props.useCase.dragEnter(e.dataTransfer)},r._handleDragLeave=function(){this.props.store.isDisabled||this.props.useCase.dragLeave()},r._handleDragOver=function(e){this.props.store.isDisabled||(this._dragPosition={screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,setDragImage:e.dataTransfer&&!!e.dataTransfer.setDragImage},this.props.useCase.dragOver(this._dragPosition),this._isDroppable(e)&&e.preventDefault(),this.props.onEnhancerDragOver(e))},r._handleDragEnd=function(e){this.props.store.isDisabled||(this.props.useCase.dragEnd(),this.props.onEnhancerDragEnd(e))},r._handleDrop=function(e){if(!this.props.store.isDisabled&&(e.preventDefault(),!1!==this._isDroppable(e))){var t={screenX:e.screenX,screenY:e.screenY,clientY:e.clientY},r=e.dataTransfer;this.props.useCase.drop(t,r),this.props.onEnhancerDrop(e)}},t}(y.b.Component),s()(n.prototype,"_handleClick",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleClick"),n.prototype),s()(n.prototype,"_handleMouseDown",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleMouseDown"),n.prototype),s()(n.prototype,"_handleMouseMove",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleMouseMove"),n.prototype),s()(n.prototype,"_handleMouseUp",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleMouseUp"),n.prototype),s()(n.prototype,"_handleDragStart",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragStart"),n.prototype),s()(n.prototype,"_handleDragEnter",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragEnter"),n.prototype),s()(n.prototype,"_handleDragLeave",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragLeave"),n.prototype),s()(n.prototype,"_handleDragOver",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragOver"),n.prototype),s()(n.prototype,"_handleDragEnd",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDragEnd"),n.prototype),s()(n.prototype,"_handleDrop",[p.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleDrop"),n.prototype),n);m.defaultProps={onEnhancerClick:function(){},onEnhancerMouseDown:function(){},onEnhancerMouseMove:function(){},onEnhancerMouseUp:function(){},onEnhancerDragStart:function(){},onEnhancerDragOver:function(){},onEnhancerDragEnd:function(){},onEnhancerDrop:function(){}},m.propTypes={useCase:y.a.instanceOf(l.a).isRequired,children:y.a.oneOfType([y.a.arrayOf(y.a.oneOfType([y.a.element,y.a.string])),y.a.element]),className:y.a.string,store:y.a.instanceOf(d.a).isRequired,onEnhancerClick:y.a.func,onEnhancerMouseDown:y.a.func,onEnhancerMouseMove:y.a.func,onEnhancerMouseUp:y.a.func,onEnhancerDragStart:y.a.func,onEnhancerDragOver:y.a.func,onEnhancerDragEnd:y.a.func,onEnhancerDrop:y.a.func};var D=Object(_.b)(m),O=D;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/views/drag-and-drop-enhancer/index.jsx",localName:t}})}catch(e){}}e(m,"DragAndDropEnhancer"),e(D,"default")}();var E,w=r(17),S=r.n(w),P=r(217),k=(E=function(e){function t(){var t,r;if((t=e.call(this)||this)._isDragging=!1,t._hotkeyBinder=b.P.get("hotkeyBinder"),t._virtualEditable=b.P.get("virtualEditable"),t._wrapperDomRef=y.b.createRef(),"undefined"==typeof DragEvent||P.a.isMobile())return t._shouldUseNativeDragEvent=!0,S()(t);try{new DragEvent("dragover"),r=!0}catch(e){r=!1}return t._dispatchDragEvent=r?function(e,t,r){var n=new DragEvent(e,r);t.dispatchEvent(n)}:function(e,t,r){var n=document.createEvent("DragEvent"),o=r.bubbles,a=r.cancelable,i=r.view,s=r.detail,p=r.screenX,c=r.screenY,d=r.clientX,u=r.clientY,l=r.ctrlKey,g=r.altKey,h=r.shiftKey,y=r.metaKey,_=r.button,f=r.relatedTarget;n.initMouseEvent(e,o,a,i,s,p,c,d,u,l,g,h,y,_,f),t.dispatchEvent(n)},t}a()(t,e);var r=t.prototype;return r.componentWillUnmount=function(){this._isDragging&&this._finishDragging()},r.render=function(){return this._shouldUseNativeDragEvent?y.b.createElement("div",{ref:this._wrapperDomRef,className:"se-dnd-wrap se-dnd-wrap-native"},this.props.children):y.b.createElement("div",{ref:this._wrapperDomRef,className:"se-dnd-wrap",onDragStart:this._handleDragStart,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onMouseMoveCapture:this._handleMouseMove,onMouseUp:this._handleMouseUp},this.props.children)},r._handleDragStart=function(e){e.preventDefault(),this._startDragging(e.target)},r._handleMouseEnter=function(e){this._isDragging&&this._dispatchDragEvent("dragenter",e.target,e)},r._handleMouseLeave=function(e){this._isDragging&&this._dispatchDragEvent("dragleave",e.target,e)},r._handleMouseMove=function(e){this._isDragging&&(e.preventDefault(),this._dispatchDragEvent("dragover",e.target,e))},r._isEventOccuredInWrapper=function(e){return this._wrapperDomRef.current.contains(e)},r._handleMouseUp=function(e){this._isDragging&&(!0===this._isEventOccuredInWrapper(e.target)&&this._dispatchDragEvent("drop",e.target,e),this._dispatchDragEvent("dragend",this._draggingTarget,e),this._finishDragging())},r._startDragging=function(e){this._isDragging||(this._isDragging=!0,this._draggingTarget=e,this._hotkeyBinder.pause(),document.addEventListener("keydown",this._handleKeyDown,{capture:!0}),document.addEventListener("mouseup",this._handleMouseUp))},r._finishDragging=function(){this._isDragging&&(this._isDragging=!1,this._draggingTarget=null,this._hotkeyBinder.unpause(),document.removeEventListener("keydown",this._handleKeyDown,{capture:!0}),document.removeEventListener("mouseup",this._handleMouseUp))},r._handleKeyDown=function(e){if(this._isDragging){var t=e.key;e.preventDefault(),e.stopImmediatePropagation(),"PageUp"===t?this._virtualEditable.pageUp():"PageDown"===t?this._virtualEditable.pageDown():"Escape"!==t&&"Esc"!==t||(this._dispatchDragEvent("dragend",this._draggingTarget,e),this._finishDragging())}},t}(y.b.Component),s()(E.prototype,"_handleDragStart",[p.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleDragStart"),E.prototype),s()(E.prototype,"_handleMouseEnter",[p.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseEnter"),E.prototype),s()(E.prototype,"_handleMouseLeave",[p.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseLeave"),E.prototype),s()(E.prototype,"_handleMouseMove",[p.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseMove"),E.prototype),s()(E.prototype,"_handleMouseUp",[p.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleMouseUp"),E.prototype),s()(E.prototype,"_handleKeyDown",[p.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleKeyDown"),E.prototype),E);k.propTypes={children:y.a.oneOfType([y.a.arrayOf(y.a.oneOfType([y.a.element,y.a.string])),y.a.element])};var j,M=Object(_.b)(k),C=M;!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/views/drag-and-wheel-enhancer/index.jsx",localName:t}})}catch(e){}}e(k,"DragAndWheelEnhancer"),e(M,"default")}(),r.d(t,"a",function(){return I}),r.d(t,"b",function(){return x});var I=y.b.createContext({readOnly:!1}),x=(j=function(e){function t(t){var r;(r=e.call(this,t)||this).state={errorToggle:!1};var n=t.errorRecoveryUseCase,o=t.a11yFocusUseCase;return r._errorRecoveryUseCase=n,r._a11yFocusUseCase=o,r._elementRef=y.b.createRef(),window.addEventListener("error",r._handleError),r}a()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._elementRef.current.addEventListener("focusin",this._handleFocus,!1)},r.componentWillUnmount=function(){this._elementRef.current.removeEventListener("focusin",this._handleFocus,!1),window.removeEventListener("error",this._handleError)},r.render=function(){var e=this.props,t=e.children,r=e.className,n=e.dragAndDropStore,o=e.dragAndDropUseCase,a=e.language,i=e.editorStatusStore;return y.b.createElement(I.Provider,{value:{readOnly:i.readOnly}},y.b.createElement("div",{className:"se-body __se-body",lang:a,ref:this._elementRef},y.b.createElement(O,{store:n,useCase:o,className:r,onEnhancerClick:this._handleClick,onEnhancerMouseDown:this._handleMouseDown,onEnhancerMouseUp:this._handleMouseUp,onEnhancerDragStart:this._handleDragStart,onEnhancerDragOver:this._handleDragOver,onEnhancerDrop:this._handleDrop,onEnhancerDragEnd:this._handleDragEnd},y.b.createElement(C,null,t))))},r._handleError=function(e){this._errorRecoveryUseCase.recoverError(e)},r._handleClick=function(e){c.a.triggerEvent("click",e)},r._handleMouseDown=function(e){c.a.triggerEvent("mousedown",e)},r._handleMouseUp=function(e){c.a.triggerEvent("mouseup",e)},r._handleDragStart=function(){},r._handleDrop=function(){},r._handleFocus=function(e){this._a11yFocusUseCase.handleFocus(e)},t}(y.b.Component),s()(j.prototype,"_handleError",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleError"),j.prototype),s()(j.prototype,"_handleClick",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleClick"),j.prototype),s()(j.prototype,"_handleMouseDown",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleMouseDown"),j.prototype),s()(j.prototype,"_handleMouseUp",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleMouseUp"),j.prototype),s()(j.prototype,"_handleDragStart",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleDragStart"),j.prototype),s()(j.prototype,"_handleDrop",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleDrop"),j.prototype),s()(j.prototype,"_handleFocus",[p.autobind],Object.getOwnPropertyDescriptor(j.prototype,"_handleFocus"),j.prototype),j);x.defaultProps={className:"",children:null},x.propTypes={errorRecoveryUseCase:y.a.instanceOf(g.a).isRequired,dragAndDropUseCase:y.a.instanceOf(l.a).isRequired,dragAndDropStore:y.a.instanceOf(d.a).isRequired,editorStatusStore:y.a.instanceOf(u.a).isRequired,a11yFocusUseCase:y.a.instanceOf(h.a).isRequired,language:y.a.string.isRequired,children:y.a.oneOfType([y.a.element,y.a.array]),className:y.a.string};var T=Object(_.b)(x);!function(){function e(e,t){if("function"==typeof e&&!e.hasOwnProperty("__source"))try{Object.defineProperty(e,"__source",{enumerable:!1,configurable:!0,value:{fileName:"/home1/irteam/deploy/jenkins_ndeploy/jobs/Rabbit-editor-blog-desktop-normal-real/workspace/packages/common/shared-parts/views/smart-editor-wrapper/index.jsx",localName:t}})}catch(e){}}e(I,"SEContext"),e(x,"SmartEditorWrapper"),e(T,"default")}()}}]);
//# sourceMappingURL=se-app~app-context.js.map?t=1603272704374